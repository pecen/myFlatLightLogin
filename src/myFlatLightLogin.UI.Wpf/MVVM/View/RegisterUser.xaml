<UserControl
    x:Class="myFlatLightLogin.UI.Wpf.MVVM.View.RegisterUser"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:behavior="clr-namespace:myFlatLightLogin.UI.Wpf.Behavior"
    xmlns:converter="clr-namespace:myFlatLightLogin.UI.Wpf.Converter"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:icon="http://metro.mahapps.com/winfx/xaml/iconpacks">
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis" />
        <converter:BoolToVisibilityPwdText x:Key="BoolToVisPwd" />
        <converter:InvertedBooleanToVisibilityConverter x:Key="InvertedBoolToVis" />
    </UserControl.Resources>
    <Border
        Width="300"
        Padding="30"
        HorizontalAlignment="Center"
        VerticalAlignment="Center"
        Background="White"
        BorderBrush="#e2e9e9"
        BorderThickness="2"
        CornerRadius="10">
        <StackPanel>
            <TextBlock
                Margin="0,0,0,10"
                FontSize="16"
                FontWeight="SemiBold"
                Foreground="#5a5a5a"
                Text="Register New Account" />

            <!--  Name TextBox  -->
            <Grid>
                <TextBlock
                    Margin="35,0,5,0"
                    VerticalAlignment="Center"
                    Panel.ZIndex="1"
                    Foreground="#bdbdbd"
                    IsHitTestVisible="False"
                    Text="Enter Name"
                    Visibility="{Binding ElementName=txtName, Path=Text.IsEmpty, Converter={StaticResource BoolToVis}}" />
                <TextBox x:Name="txtName" Text="{Binding Name, UpdateSourceTrigger=PropertyChanged}" />

                <icon:PackIconMaterial
                    Width="15"
                    Margin="10,0,0,0"
                    VerticalAlignment="Center"
                    Foreground="#c7c7c7"
                    Kind="AccountOutline" />
            </Grid>

            <!--  Lastname TextBox  -->
            <Grid>
                <TextBlock
                    Margin="35,0,5,0"
                    VerticalAlignment="Center"
                    Panel.ZIndex="1"
                    Foreground="#bdbdbd"
                    IsHitTestVisible="False"
                    Text="Enter Lastname"
                    Visibility="{Binding ElementName=txtLastname, Path=Text.IsEmpty, Converter={StaticResource BoolToVis}}" />
                <TextBox x:Name="txtLastname" Text="{Binding Lastname, UpdateSourceTrigger=PropertyChanged}" />

                <icon:PackIconMaterial
                    Width="15"
                    Margin="10,0,0,0"
                    VerticalAlignment="Center"
                    Foreground="#c7c7c7"
                    Kind="AccountOutline" />
            </Grid>

            <!--  Email TextBox  -->
            <Grid>
                <TextBlock
                    Margin="35,0,5,0"
                    VerticalAlignment="Center"
                    Panel.ZIndex="1"
                    Foreground="#bdbdbd"
                    IsHitTestVisible="False"
                    Text="Enter Email"
                    Visibility="{Binding ElementName=txtEmail, Path=Text.IsEmpty, Converter={StaticResource BoolToVis}}" />
                <TextBox x:Name="txtEmail" Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}" />

                <icon:PackIconMaterial
                    Width="15"
                    Margin="10,0,0,0"
                    VerticalAlignment="Center"
                    Foreground="#c7c7c7"
                    Kind="EmailVariant" />
            </Grid>

            <!--  Password TextBox with Show/Hide Toggle  -->
            <Grid>
                <!--  Placeholder text  -->
                <TextBlock
                    Margin="35,0,40,0"
                    VerticalAlignment="Center"
                    Panel.ZIndex="1"
                    Foreground="#bdbdbd"
                    IsHitTestVisible="False"
                    Text="Enter Password"
                    Visibility="{Binding PwdIsEmpty, Converter={StaticResource BoolToVis}}" />

                <!--  PasswordBox (hidden password) - Visible when IsPasswordVisible is False  -->
                <PasswordBox
                    x:Name="txtPassword"
                    Visibility="{Binding IsPasswordVisible, Converter={StaticResource InvertedBoolToVis}}">
                    <i:Interaction.Behaviors>
                        <behavior:PasswordBoxBehavior />
                    </i:Interaction.Behaviors>
                </PasswordBox>

                <!--  TextBox (visible password)  -->
                <TextBox
                    x:Name="txtPasswordVisible"
                    Text="{Binding Password, UpdateSourceTrigger=PropertyChanged}"
                    Visibility="{Binding IsPasswordVisible, Converter={StaticResource BoolToVis}}" />

                <!--  Lock Icon (left side)  -->
                <icon:PackIconMaterial
                    Width="15"
                    Margin="10,0,0,0"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center"
                    Panel.ZIndex="2"
                    Foreground="#c7c7c7"
                    Kind="LockOutline" />

                <!--  Eye Icon Toggle Button (right side, inside field)  -->
                <Button
                    Width="24"
                    Height="24"
                    Margin="0,0,5,0"
                    Padding="0"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    Panel.ZIndex="2"
                    Background="Transparent"
                    BorderThickness="0"
                    Command="{Binding TogglePasswordVisibilityCommand}"
                    Cursor="Hand"
                    ToolTip="Show/Hide Password">
                    <icon:PackIconMaterial
                        Width="16"
                        Height="16"
                        Foreground="#5a5a5a">
                        <icon:PackIconMaterial.Style>
                            <Style TargetType="icon:PackIconMaterial">
                                <Setter Property="Kind" Value="EyeOutline" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsPasswordVisible}" Value="True">
                                        <Setter Property="Kind" Value="EyeOffOutline" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </icon:PackIconMaterial.Style>
                    </icon:PackIconMaterial>
                </Button>
            </Grid>

            <!--  Confirm Password TextBox with Show/Hide Toggle  -->
            <Grid>
                <!--  Placeholder text  -->
                <TextBlock
                    Margin="35,0,40,0"
                    VerticalAlignment="Center"
                    Panel.ZIndex="1"
                    Foreground="#bdbdbd"
                    IsHitTestVisible="False"
                    Text="Confirm Password"
                    Visibility="{Binding ConfirmPwdIsEmpty, Converter={StaticResource BoolToVis}}" />

                <!--  PasswordBox (hidden password) - Visible when IsConfirmPasswordVisible is False  -->
                <PasswordBox
                    x:Name="txtConfirmPassword"
                    Visibility="{Binding IsConfirmPasswordVisible, Converter={StaticResource InvertedBoolToVis}}">
                    <i:Interaction.Behaviors>
                        <behavior:PasswordBoxBehavior />
                    </i:Interaction.Behaviors>
                </PasswordBox>

                <!--  TextBox (visible password)  -->
                <TextBox
                    x:Name="txtConfirmPasswordVisible"
                    Text="{Binding ConfirmPassword, UpdateSourceTrigger=PropertyChanged}"
                    Visibility="{Binding IsConfirmPasswordVisible, Converter={StaticResource BoolToVis}}" />

                <!--  Check Icon (left side)  -->
                <icon:PackIconMaterial
                    Width="15"
                    Margin="10,0,0,0"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center"
                    Panel.ZIndex="2"
                    Foreground="#c7c7c7"
                    Kind="CheckCircleOutline" />

                <!--  Eye Icon Toggle Button (right side, inside field)  -->
                <Button
                    Width="24"
                    Height="24"
                    Margin="0,0,5,0"
                    Padding="0"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    Panel.ZIndex="2"
                    Background="Transparent"
                    BorderThickness="0"
                    Command="{Binding ToggleConfirmPasswordVisibilityCommand}"
                    Cursor="Hand"
                    ToolTip="Show/Hide Confirm Password">
                    <icon:PackIconMaterial
                        Width="16"
                        Height="16"
                        Foreground="#5a5a5a">
                        <icon:PackIconMaterial.Style>
                            <Style TargetType="icon:PackIconMaterial">
                                <Setter Property="Kind" Value="EyeOutline" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsConfirmPasswordVisible}" Value="True">
                                        <Setter Property="Kind" Value="EyeOffOutline" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </icon:PackIconMaterial.Style>
                    </icon:PackIconMaterial>
                </Button>
            </Grid>

            <!--<CheckBox
                Margin="0,10,0,5"
                Content="Remember Me"
                IsChecked="True"
                Style="{DynamicResource CheckBoxStyle1}" />-->

            <!--  Buttons  -->
            <Grid Margin="0,10,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Button
                    Margin="0,0,5,0"
                    Command="{Binding NavigateToLoginCommand}"
                    Content="Sign in"
                    Style="{StaticResource mainButton}" />
                <Button
                    Grid.Column="1"
                    Margin="5,0,0,0"
                    Background="#ff131e"
                    BorderBrush="#ff131e"
                    Command="{Binding RegisterUserCommand}"
                    Content="Register"
                    Foreground="#ffffff"
                    Style="{StaticResource mainButtonPrimary}" />
            </Grid>

            <!--  Or Text  -->
            <Grid Margin="0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Separator Background="#dfdfdf" />
                <TextBlock
                    Grid.Column="1"
                    Margin="5,0,5,2"
                    Foreground="#5a5a5a"
                    Text="or" />
                <Separator Grid.Column="2" Background="#dfdfdf" />
            </Grid>

            <!--  Long Button  -->
            <Button Content="Login as Guest" Style="{StaticResource mainButtonLong}" />

        </StackPanel>
    </Border>
</UserControl>
