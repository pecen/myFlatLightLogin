<UserControl
    x:Class="myFlatLightLogin.UI.Wpf.MVVM.View.PasswordSyncDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:myFlatLightLogin.Core.Controls;assembly=myFlatLightLogin.Core"
    xmlns:converter="clr-namespace:myFlatLightLogin.UI.Wpf.Converter"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:extension="clr-namespace:myFlatLightLogin.UI.Wpf.Extension"
    xmlns:icon="http://metro.mahapps.com/winfx/xaml/iconpacks"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="clr-namespace:myFlatLightLogin.UI.Wpf.MVVM.ViewModel"
    d:DataContext="{d:DesignInstance Type=vm:PasswordSyncDialogViewModel}"
    d:DesignHeight="500"
    d:DesignWidth="450"
    mc:Ignorable="d">

    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis" />
        <converter:InverseBoolConverter x:Key="InverseBoolConverter" />
    </UserControl.Resources>

    <Border
        Padding="30"
        Background="White"
        BorderBrush="#e2e9e9"
        BorderThickness="1"
        CornerRadius="10">
        <StackPanel>
            <!--  Icon and Title  -->
            <icon:PackIconMaterial
                Width="60"
                Height="60"
                HorizontalAlignment="Center"
                Foreground="#ff9800"
                Kind="SyncAlert" />

            <TextBlock
                Margin="0,15,0,10"
                HorizontalAlignment="Center"
                FontSize="22"
                FontWeight="Bold"
                Foreground="#333"
                Text="Password Sync Required" />

            <!--  Explanation  -->
            <TextBlock
                Margin="0,0,0,20"
                FontSize="13"
                Foreground="#606060"
                TextAlignment="Center"
                TextWrapping="Wrap">
                <Run Text="Your password was changed while offline for:" />
                <LineBreak />
                <Run FontWeight="SemiBold" Text="{Binding UserEmail, Mode=OneWay}" />
                <LineBreak />
                <LineBreak />
                <Run Text="To sync your password to Firebase, please enter both your OLD password (before the change) and your NEW password (after the change)." />
            </TextBlock>

            <!--  Old Password  -->
            <TextBlock
                Margin="0,10,0,5"
                FontSize="13"
                Foreground="#909090"
                Text="Old Password (before offline change)" />
            <controls:TogglePwdBox
                Height="40"
                Margin="0,0,0,15"
                FontSize="14"
                Password="{Binding OldPassword, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

            <!--  New Password  -->
            <TextBlock
                Margin="0,10,0,5"
                FontSize="13"
                Foreground="#909090"
                Text="New Password (after offline change)" />
            <controls:TogglePwdBox
                Height="40"
                Margin="0,0,0,15"
                FontSize="14"
                Password="{Binding NewPassword, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

            <!--  Confirm New Password  -->
            <TextBlock
                Margin="0,10,0,5"
                FontSize="13"
                Foreground="#909090"
                Text="Confirm New Password" />
            <controls:TogglePwdBox
                Height="40"
                Margin="0,0,0,20"
                FontSize="14"
                Password="{Binding ConfirmPassword, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

            <!--  Buttons  -->
            <Grid Margin="0,10,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Button
                    Grid.Column="0"
                    Height="45"
                    Margin="0,0,5,0"
                    Background="#f0f0f0"
                    BorderThickness="0"
                    Command="{Binding SkipCommand}"
                    Content="Skip for Now"
                    FontSize="14"
                    Foreground="#606060"
                    IsEnabled="{Binding IsProcessing, Converter={StaticResource InverseBoolConverter}}" />

                <Button
                    Grid.Column="1"
                    Height="45"
                    Margin="5,0,0,0"
                    Background="#4CAF50"
                    BorderThickness="0"
                    Command="{Binding SyncPasswordCommand}"
                    Content="Sync Password"
                    FontSize="14"
                    Foreground="White" />
            </Grid>

            <!--  Processing Indicator  -->
            <TextBlock
                Margin="0,15,0,0"
                HorizontalAlignment="Center"
                FontSize="12"
                Foreground="#ff9800"
                Text="Syncing password to Firebase..."
                Visibility="{Binding IsProcessing, Converter={StaticResource BoolToVis}}" />
        </StackPanel>
    </Border>
</UserControl>
